(this["webpackJsonpsite-forum"]=this["webpackJsonpsite-forum"]||[]).push([[0],[,,,,,,,function(e,t,r){},,,,,,function(e,t,r){},,function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),s=r(8),c=r.n(s),i=(r(13),r(2)),o=r.n(i),d=r(3),u=r(5),h=(r(15),{}),l=n.a.createContext(h);var p,j=r(4);function b(e,t){switch(t.type){case p.test:return console.log("State API WORKIN"),e;case p.setThreads:return Object(j.a)(Object(j.a)({},e),{},{threads:t.payload});case p.setPassword:return Object(j.a)(Object(j.a)({},e),{},{password:t.payload});default:return console.log("Action not defined in the reducer"),e}}function f(e){return{type:p.setThreads,payload:e}}!function(e){e[e.test=0]="test",e[e.setPassword=1]="setPassword",e[e.setThreads=2]="setThreads"}(p||(p={}));r(16);var v=r(0);function x(){var e=n.a.useContext(l).dispatch;function t(t){t.length>8&&e(function(e){return{type:p.setPassword,payload:e}}(t))}return Object(v.jsxs)("header",{children:[Object(v.jsx)("h1",{children:" Forum Admin "}),Object(v.jsx)("input",{type:"password",placeholder:"secret key token",onChange:function(e){return t(e.target.value)}})]})}r(7);var m="https://galavtg.herokuapp.com/api/",O={getallthreads:"".concat(m,"thread/admin/getAllThread"),deleteAthred:"".concat(m,"thread/admin/removeThread"),deleteAcomment:"".concat(m,"thread/deletereply"),banuser:"".concat(m,"admin/banUser")};function g(e){var t=Date.now()-e;if(t<=354e4){var r=Math.round(t/6e4);return r<=1?r+" min ago":r+" mins ago"}if(t<=828e5){var a=Math.round(t/36e5);return a<=1?a+" hour ago":a+" hours ago"}var n=Math.round(t/864e5);return 1===n?n+" day ago":n+" days ago"}var w=r.p+"static/media/male1.dece8157.png",y=r.p+"static/media/male2.0fb790b9.png",k=r.p+"static/media/male3.448007ee.png",C=r.p+"static/media/male4.730de75b.png",N=r.p+"static/media/female1.85a02bd8.png",T=r.p+"static/media/female2.71b2d9ae.png",P=r.p+"static/media/female3.c5486fee.png",S=r.p+"static/media/female4.4b6a858f.png",A=[w,y,k,C,N,T,P,S];function F(e){return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"thread-heading",children:[Object(v.jsx)("img",{src:A[e.creator.avatar],width:"50",height:"50",alt:"avatar icon"}),Object(v.jsxs)("div",{className:"creatorContainer",children:[Object(v.jsxs)("div",{className:"creator",children:[Object(v.jsx)("div",{className:"creator-name",children:e.creator.username}),Object(v.jsxs)("div",{className:"thread-date",children:[" ",g(e.thread.date)," "]})]}),Object(v.jsx)("div",{className:"thread-title",children:e.thread.title})]})]}),Object(v.jsx)("div",{className:"thread-description",children:e.thread.text})]})}r(18);function J(e){return _.apply(this,arguments)}function _(){return(_=Object(d.a)(o.a.mark((function e(t){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",{err:"password was not defined"});case 2:return e.next=4,fetch(O.getallthreads,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})});case 4:return r=e.sent,e.next=7,r.json();case 7:if(a=e.sent){e.next=10;break}throw new Error;case 10:if(!a.err){e.next=12;break}throw new Error(a.err);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=[w,y,k,C,N,T,P,S];function B(e){var t=n.a.useContext(l),r=t.state,a=t.dispatch;if(void 0===e.replies)return Object(v.jsx)("div",{children:"empty"});var s=function(){var t=Object(d.a)(o.a.mark((function t(n,s,c){var i,d,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.prev=1,t.next=4,fetch(O.deleteAcomment,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_token:c,threadid:e.threadid,commentid:s})});case 4:return i=t.sent,t.next=7,i.json();case 7:if(!(d=t.sent).err){t.next=10;break}throw new Error(d.err);case 10:return t.next=12,J(r.password);case 12:u=t.sent,a(f(u)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),alert("Cannot delete a reply\n"+t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,r,a){return t.apply(this,arguments)}}(),c=function(){var e=Object(d.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.prev=1,e.next=4,fetch(O.banuser,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:r.password,_id:a})});case 4:return n=e.sent,e.next=7,n.json();case 7:e.sent.message?alert("The user was unbannded!"):alert("The user was banned"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),alert("Cant ban a user.\n"+e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:e.replies.map((function(e,t){return Object(v.jsxs)("div",{style:{width:"90%",marginLeft:"5%",marginTop:"1rem",border:"1px solid gray",borderRadius:"12px",padding:"8px"},children:[Object(v.jsxs)("div",{className:"thread-heading",children:[Object(v.jsx)("img",{src:E[e.avatar],width:"50",height:"50",alt:"avatar icon"}),Object(v.jsx)("div",{className:"creatorContainer",children:Object(v.jsxs)("div",{className:"creator",children:[Object(v.jsx)("div",{className:"creator-name",children:e.username}),Object(v.jsxs)("div",{className:"thread-date",children:[" ",g(e.time)," "]})]})})]}),Object(v.jsx)("div",{className:"thread-description",children:e.text}),Object(v.jsxs)("div",{className:"thread-options-container",children:[Object(v.jsx)("div",{onClick:function(t){return s(t,e._id,e._token)},children:"... Delete ... "}),Object(v.jsx)("div",{onClick:function(t){return c(t,e.userid)},children:"... Block ...  "})]})]},t)}))})}function D(){var e=n.a.useContext(l).state;return Object(v.jsx)(n.a.Fragment,{children:e.threads?e.threads.map((function(e,t){return Object(v.jsx)("div",{children:Object(v.jsx)(I,{athread:e})},t)})):Object(v.jsx)("div",{className:"loading",children:" ... Loading threads or threads are just empty ... "})})}function I(e){var t=e.athread,r=n.a.useContext(l),a=r.state,s=r.dispatch,c=n.a.useState(!1),i=Object(u.a)(c,2),h=i[0],p=i[1],j=function(e){e.stopPropagation(),p(!h)},b=function(){var e=Object(d.a)(o.a.mark((function e(r){var n,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.stopPropagation(),e.prev=1,n=fetch(O.deleteAthred,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:a.password,threadid:t._id})}),e.next=5,n;case 5:return e.next=7,e.sent.json();case 7:if(!(c=e.sent).err){e.next=10;break}throw new Error(c.err);case 10:return e.next=12,J(a.password);case 12:i=e.sent,s(f(i)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),alert("Cant delete.\n"+e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(o.a.mark((function e(r){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.stopPropagation(),e.prev=1,e.next=4,fetch(O.banuser,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:a.password,_id:t.creator.uid})});case 4:return n=e.sent,e.next=7,n.json();case 7:if((s=e.sent).message&&alert("The user was unbannded!"),!s.err){e.next=13;break}throw new Error(s.err);case 13:alert("The user was banned");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),alert("Cant ban a user.\n"+e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"threaditem",children:[Object(v.jsx)(F,{creator:t.creator,thread:t.thread}),Object(v.jsxs)("div",{className:"thread-options-container",children:[Object(v.jsx)("div",{onClick:b,children:"Delete"}),h?Object(v.jsx)("div",{onClick:j,children:">>Close<<"}):Object(v.jsx)("div",{onClick:j,children:"Open"}),Object(v.jsx)("div",{onClick:x,children:"Block"})]}),h&&Object(v.jsx)(B,{replies:t.replies,threadid:t._id})]})}var L=function(){var e=n.a.useReducer(b,{text:"Hello there",password:"?"}),t=Object(u.a)(e,2),r=t[0],a=t[1],s=function(){var e=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.stopPropagation(),e.prev=1,e.next=4,J(r.password);case 4:n=e.sent,a(f(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Failed to load threads from the server. "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(l.Provider,{value:{state:r,dispatch:a},children:[Object(v.jsx)(x,{}),Object(v.jsx)(D,{}),Object(v.jsx)("div",{id:"refresh",onClick:s,children:" Refresh "})]})},M=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,20)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))};c.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(L,{})}),document.getElementById("root")),M()}],[[19,1,2]]]);
//# sourceMappingURL=main.52f844d3.chunk.js.map